<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1649847679169-1" author="playe (generated)">
        <createTable tableName="genre">
            <column autoIncrement="true" name="id" type="INT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="genre_pkey"/>
            </column>
            <column name="name" type="VARCHAR(15)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1649847679169-2" author="playe (generated)">
        <createTable tableName="playlist">
            <column autoIncrement="true" name="id" type="INT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="playlist_pkey"/>
            </column>
            <column name="auditions" type="INT"/>
            <column name="name" type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="song_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1649847679169-3" author="playe (generated)">
        <createTable tableName="artist">
            <column autoIncrement="true" name="id" type="INT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="artist_pkey"/>
            </column>
            <column name="name" type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1649847679169-4" author="playe (generated)">
        <addUniqueConstraint columnNames="name" constraintName="uk_ctffrbu4484ft8dlsa5vmqdka" tableName="genre"/>
    </changeSet>
    <changeSet id="1649847679169-5" author="playe (generated)">
        <addUniqueConstraint columnNames="name" constraintName="uk_gmx0jjome08oqihtks37w0lea" tableName="playlist"/>
    </changeSet>
    <changeSet id="1649847679169-6" author="playe (generated)">
        <addUniqueConstraint columnNames="name" constraintName="uk_r03a96lqhsb7djq2tn4rq60vn" tableName="artist"/>
    </changeSet>
    <changeSet id="1649847679169-7" author="playe (generated)">
        <createTable tableName="song">
            <column autoIncrement="true" name="song_id" type="INT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="song_pkey"/>
            </column>
            <column name="auditions" type="INT"/>
            <column name="name" type="VARCHAR(30)"/>
            <column name="artist_id" type="INT"/>
            <column name="genre_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet id="1649847679169-8" author="playe (generated)">
        <addForeignKeyConstraint baseColumnNames="genre_id" baseTableName="song"
                                 constraintName="fk3kr980xhy18ojchq1ekbevypy" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="genre"/>
    </changeSet>
    <changeSet id="1649847679169-9" author="playe (generated)">
        <addForeignKeyConstraint baseColumnNames="artist_id" baseTableName="song"
                                 constraintName="fka21ft97nj7thwrp5d31xdaxr" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="artist"/>
    </changeSet>
    <changeSet id="1649847679169-10" author="playe (generated)">
        <addForeignKeyConstraint baseColumnNames="song_id" baseTableName="playlist"
                                 constraintName="fki46m9yffq6oehh5wmndp9du4h" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="song_id" referencedTableName="song"/>
    </changeSet>
    <changeSet id="insert-data" author="niatomi" context="test">
        <insert tableName="person_table">
            <column name="id" value="1"/>
            <column name="first_name" value="Egor"/>
            <column name="last_name" value="Ivanov"/>
            <column name="middle_name" value="Ivanovich"/>
            <column name="age" valueNumeric="20"/>
        </insert>
    </changeSet>
</databaseChangeLog>